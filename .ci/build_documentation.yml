steps:

- script: |
    mkdir -p doc_archive

- script: |
    sudo apt install pandoc -qy
    pip install -r requirements_docs.txt
    make -C docs html
  condition: always()  # always build docs, regardless of prior steps testing
  displayName:  'Build Documentation'

- task: ArchiveFiles@2
  inputs:
    rootFolderOrFile: docs/build/html
    includeRootFolder: false
    archiveType: 'zip'
    archiveFile: doc_archive/ansys-mapdl_docs.zip
  displayName: Compress html documentation

- task: PublishPipelineArtifact@0
  inputs:
    artifactName: 'documentation'
    targetPath: 'doc_archive'
